// RUN: run-pass
// EXIT: 50
// SPEC: 6.4 Lower-Expr-Deref
// DESC: Verify load instruction lowering via dereference

public procedure main(move ctx: Context) -> i32 {
    var x: i32 = 42
    let p: Ptr<i32>@Valid = &x

    let v1: i32 = *p
    *p = 50
    let v2: i32 = *p

    return if v1 == 42 { v2 } else { 1 }
}
