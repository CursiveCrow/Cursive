// RUN: compile-pass
// SPEC: 6.1.4 Layout-Union-Niche
// DESC: Verify niche optimization for single-payload unions

public procedure main(move ctx: Context) -> i32 {
    // i32 | () can use niche optimization
    // Unit type () has no representation, so i32 | () == sizeof(i32)
    static_assert(sizeof(i32 | ()) == 4)
    static_assert(alignof(i32 | ()) == 4)

    // Ptr<T> | () uses null pointer niche
    static_assert(sizeof(Ptr<i32> | ()) == 8)

    // bool | () can use niche in bool's unused bits
    static_assert(sizeof(bool | ()) <= 1)

    return 0
}
