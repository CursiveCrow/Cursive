// RUN: run-pass
// EXIT: 30
// SPEC: 6.2 ABI-Tuple
// DESC: Verify tuple passing conventions

procedure pass_pair(t: const (i32, i32)) -> i32 {
    return t.0 + t.1
}

procedure pass_triple(t: const (i32, i32, i32)) -> i32 {
    return t.0 + t.1 + t.2
}

procedure pass_nested(t: const ((i32, i32), i32)) -> i32 {
    return t.0.0 + t.0.1 + t.1
}

public procedure main(move ctx: Context) -> i32 {
    let pair: (i32, i32) = (10, 20)
    let sum: i32 = pass_pair(pair)

    let triple: (i32, i32, i32) = (1, 2, 3)
    let sum3: i32 = pass_triple(triple)

    let nested: ((i32, i32), i32) = ((4, 5), 6)
    let sumn: i32 = pass_nested(nested)

    return if sum3 == 6 && sumn == 15 { sum } else { 1 }
}
