// RUN: run-pass
// EXIT: 42
// SPEC: 15.3
// DESC: Basic key acquisition for shared access

record Counter {
    var value: i32
}

public procedure main(move ctx: Context) -> i32 {
    let c: shared Counter = Counter { value: 0 }
    # write c {
        c.value = 42
    }
    var result: i32 = 0
    # c {
        result = c.value
    }
    return result
}
