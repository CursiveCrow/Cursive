// RUN: run-pass
// EXIT: 42
// SPEC: 5.2.11
// DESC: Record with multiple methods

record Counter {
    value: i32
}

procedure Counter::new(initial: i32) -> Counter {
    return Counter { value: initial }
}

procedure Counter::increment(~!) -> () {
    ~.value = ~.value + 1
}

procedure Counter::get(~) -> i32 {
    return ~.value
}

public procedure main(move ctx: Context) -> i32 {
    var c: Counter = Counter::new(40)
    c ~> increment()
    c ~> increment()
    return c ~> get()
}
