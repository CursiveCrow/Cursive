// RUN: run-pass
// EXIT: 42
// SPEC: 13.3
// DESC: Match on modal type states

modal Result {
    state Ok { value: i32 }
    state Err { code: i32 }
}

procedure get_value(r: Result) -> i32 {
    return match r {
        ok: Result@Ok => { ok.value }
        err: Result@Err => { 0 }
    }
}

public procedure main(move ctx: Context) -> i32 {
    let r: Result@Ok = Result@Ok { value: 42 }
    return get_value(widen r)
}
