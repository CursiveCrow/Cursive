// RUN: run-pass
// EXIT: 42
// SPEC: 5.7
// DESC: Modal type widening with widen keyword

modal Counter {
    @Zero { }
    @NonZero { value: i32 }
}

procedure get_value(c: Counter) -> i32 {
    return match c {
        Counter@Zero{} => { 0 }
        Counter@NonZero{ value } => { value }
    }
}

public procedure main(move ctx: Context) -> i32 {
    let specific: Counter@NonZero = Counter@NonZero{ value: 42 }
    let general: Counter = widen specific
    return get_value(general)
}
