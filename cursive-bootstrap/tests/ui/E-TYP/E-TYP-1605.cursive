// RUN: compile-fail
// DIAG: E-TYP-1605
// SPEC: 8.15
// DESC: Receiver permission incompatible with caller

record Data {
    value: i32
}

procedure Data::mutate(~!) -> () {
    ~.value = 10
}

procedure call_mutate(x: const Data) -> () {
    x ~> mutate()  //~ ERROR E-TYP-1605: receiver permission incompatible
}

public procedure main(move ctx: Context) -> i32 {
    return 0
}
