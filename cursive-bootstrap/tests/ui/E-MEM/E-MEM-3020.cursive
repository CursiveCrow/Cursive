// RUN: compile-fail
// DIAG: E-MEM-3020
// SPEC: 5.2.16
// DESC: Value with shorter-lived provenance escapes to longer-lived location

static g_ptr: Ptr<i32>@Null = Ptr::null()

public procedure main(move ctx: Context) -> i32 {
    region {
        var x: i32 = 42
        g_ptr = &x  //~ ERROR E-MEM-3020: provenance escape
    }
    return 0
}
