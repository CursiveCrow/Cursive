// RUN: compile-fail
// DIAG: E-MEM-3004
// SPEC: 5.2.4
// DESC: Partial move from binding without unique permission

record Pair {
    a: i32
    b: string@Managed
}

public procedure main(move ctx: Context) -> i32 {
    let p: const Pair = Pair { a: 1, b: "hello" }
    let s: string@Managed = move p.b  //~ ERROR E-MEM-3004: partial move non-unique
    return 0
}
