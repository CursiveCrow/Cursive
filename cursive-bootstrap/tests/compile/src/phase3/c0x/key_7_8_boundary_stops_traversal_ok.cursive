# SPEC_COV: C0X-7.8-BoundaryStopsTraversal
# SPEC_COV: TypeLevel-Boundary-Traversal
// ยง7.8: When deriving key path, traversal MUST stop at boundary field.
// Prevents deep structural locking across encapsulation boundaries.

record Module { #state: ModuleState }
record ModuleState { data: Data }
record Data { value: i32 }

public procedure main(ctx: Context) -> i32 {
  var m: shared Module = Module { state: ModuleState { data: Data { value: 42 } } }
  // Cannot derive path beyond #state boundary
  // This acquires key (m, .state) covering all of state
  # m.state {
    return m.state.data.value
  }
  return 0
}
