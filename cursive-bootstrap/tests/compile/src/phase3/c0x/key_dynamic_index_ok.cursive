# SPEC_COV: C0X-Key-Dynamic-Index
# SPEC_COV: C0X-Key-DynamicIndex
// Tests dynamic key block with non-constant index.

public procedure main(ctx: Context) -> i32 {
  var arr: shared [i32; 3] = [1, 2, 3]
  var idx: usize = 1
  # arr[idx] dynamic write {
    // Dynamic index requires runtime synchronization
    arr[idx] = 100
  }
  return arr[1]
}
