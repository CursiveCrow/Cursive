# SPEC_COV: C0X-Dispatch-Reduce-Type
# SPEC_COV: E-CON-0142
// Tests that reduce operator must match body type (ยง18.5.1)
// Expected diagnostic: E-CON-0142

public procedure main(ctx: Context) -> i32 {
  let domain: $ExecutionDomain = ctx~>cpu()
  let res: i32 = parallel domain {
    // Error: body returns string but reduce expects numeric for +
    return dispatch i in 0..100 [reduce: +] {
      return "hello"
    }
  }
  return 0
}
