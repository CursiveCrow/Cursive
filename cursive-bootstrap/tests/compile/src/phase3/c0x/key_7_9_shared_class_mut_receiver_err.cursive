# SPEC_COV: C0X-7.9-SharedClassMutReceiverErr
# SPEC_COV: E-SEM-2705
// ยง7.9: shared $Cl ill-formed if any DynMethod requires ~% or ~!.
// Expected diagnostic: E-SEM-2705

class Mutable {
  procedure mutate(~!)
}

record MyMutable <: Mutable {
  value: i32
  procedure mutate(~!) {
    self.value = self.value + 1
  }
}

public procedure main(move ctx: Context) -> i32 {
  // Cannot have shared $Mutable because mutate requires ~!
  var m: shared $Mutable = MyMutable { value: 42 } as shared $Mutable
  return 0
}
