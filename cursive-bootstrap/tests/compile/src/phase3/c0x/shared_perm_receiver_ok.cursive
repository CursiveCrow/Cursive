# SPEC_COV: C0X-Perm-Shared-Receiver
# SPEC_COV: C0X-Perm-Lattice
// Tests shared permission receiver shorthand (~%) parsing and type checking.
// A procedure with ~% receiver should be callable on shared data.

record Counter {
  value: i32
}

procedure Counter::increment(~%) -> i32 {
  return self.value + 1
}

procedure Counter::read_value(~) -> i32 {
  return self.value
}

public procedure main(ctx: Context) -> i32 {
  var c: Counter = Counter { value: 10 }
  var result: i32 = c ~> read_value()
  return result
}
