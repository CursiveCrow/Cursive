# SPEC_COV: FieldAccess-Nested
# SPEC_COV: T-Field
// ยง11.6.2: Two-level nested field access (self.inner.field).
// Permission propagates through each level per ยง10.1.

record Level2 {
  val: i32
}

record Level1 {
  level2: Level2
}

record Container {
  level1: Level1
  procedure get_nested(~) -> i32 {
    return self.level1.level2.val
  }
}

public procedure main(move ctx: Context) -> i32 {
  let c: Container = Container { level1: Level1 { level2: Level2 { val: 99 } } }
  return c ~> get_nested()
}
