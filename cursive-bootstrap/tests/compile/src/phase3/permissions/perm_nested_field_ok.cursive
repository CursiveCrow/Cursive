# SPEC_COV: Perm-Nested-Field
# SPEC_COV: P-Field-Perm-Propagate
// Permission propagates through nested field access.
// unique permission on outer allows mutation of inner field.

record Inner {
  val: i32
}

record Outer {
  inner: Inner
}

public procedure main(ctx: Context) -> i32 {
  var o: Outer = Outer { inner: Inner { val: 1 } };
  o.inner.val = 42;
  return o.inner.val;
}
