# SPEC_COV: DropAction-Valid
# SPEC_COV: Cleanup-Start
# SPEC_COV: Cleanup-Step-Drop-Panic
# SPEC_COV: Cleanup-Done

record Trace <: Drop {
  fs: $FileSystem,
  label: string@View,
  procedure drop(~!) -> () {
    let _ = match self.fs~>write_stdout(self.label) {
      ok: () => (),
      err: IoError => ()
    };
  }
}

public procedure main(ctx: Context) -> i32 {
  let a = Trace { fs: ctx.fs, label: "A" };
  let b = Trace { fs: ctx.fs, label: "B" };
  let _ = 1i32 / 0i32;
  return 0i32;
}
