/// End-to-end test for C0X procedure call semantics.
/// Tests pass-by-reference and procedure calls work correctly.

procedure identity(x: i32) -> i32 {
  return x
}

procedure add(a: i32, b: i32) -> i32 {
  return a + b
}

procedure add_one(x: i32) -> i32 {
  return x + 1
}

procedure compute(x: i32, y: i32, z: i32) -> i32 {
  var sum: i32 = add(x, y)
  return add(sum, z)
}

public procedure main(ctx: Context) -> i32 {
  var a: i32 = 10
  var b: i32 = 20
  var c: i32 = 12
  
  // identity(a) should return 10
  var r1: i32 = identity(a)
  
  // add(a, b) should return 30
  var r2: i32 = add(a, b)
  
  // add_one(a) should return 11
  var r3: i32 = add_one(a)
  
  // compute(a, b, c) should return 10 + 20 + 12 = 42
  var r4: i32 = compute(a, b, c)
  
  // Return 42 to indicate success
  return r4
}
