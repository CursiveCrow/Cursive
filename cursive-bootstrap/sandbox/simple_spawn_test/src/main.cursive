// Simple spawn test without captures
public procedure main(ctx: Context) -> i32 {
  let domain = ctx~>inline()

  // First write before parallel
  let msg1 = "before "
  let _ = match ctx.fs~>write_stdout(msg1) {
    ok: () => ()
    err: IoError => ()
  }

  parallel domain {
    // spawn that returns a value but doesn't capture anything
    let x = wait spawn { 42 }
  }

  // Write after parallel
  let msg2 = "after"
  let _ = match ctx.fs~>write_stdout(msg2) {
    ok: () => ()
    err: IoError => ()
  }

  return 0i32
}
