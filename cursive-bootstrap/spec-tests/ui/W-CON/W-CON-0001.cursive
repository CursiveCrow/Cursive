// RUN: compile-pass
// DIAG: W-CON-0001
// SPEC: 8.11
// DESC: Fine-grained keys in tight loop (performance hint)

record Counter {
    var value: i32
}

procedure tight_loop(c: shared Counter) -> () {
    var i: i32 = 0
    loop i < 1000 {
        # write c {  //~ WARNING W-CON-0001: fine-grained keys in loop
            c.value = c.value + 1
        }
        i = i + 1
    }
}

public procedure main(move ctx: Context) -> i32 {
    return 0
}
