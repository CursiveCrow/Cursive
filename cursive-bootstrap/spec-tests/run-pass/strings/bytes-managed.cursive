// RUN: run-pass
// EXIT: 5
// SPEC: 5.8, 12.4
// DESC: Managed bytes type creation and operations

procedure create_bytes(heap: $HeapAllocator) -> bytes@Managed | AllocationError {
    return bytes::with_capacity(64, heap)
}

procedure bytes_from_view(view: bytes@View, heap: $HeapAllocator) -> bytes@Managed | AllocationError {
    return bytes::to_managed(view, heap)
}

procedure get_bytes_length(b: const bytes@View) -> usize {
    return bytes::length(b)
}

public procedure main(move ctx: Context) -> i32 {
    let view: string@View = "hello"
    let bv: bytes@View = bytes::view_string(view)
    let len: usize = get_bytes_length(bv)
    return len as i32
}
