// RUN: run-pass
// EXIT: 42
// SPEC: 5.3
// DESC: Generic procedure with class constraint

class Addable {
    procedure add(~, other: Self) -> Self
}

record Number {
    value: i32

    procedure add(~, other: Number) -> Number {
        return Number{ value: self.value + other.value }
    }
}

implements Addable for Number { }

procedure sum<T: Addable>(a: T, b: T) -> T {
    return a ~> add(b)
}

public procedure main(move ctx: Context) -> i32 {
    let a: Number = Number{ value: 20 }
    let b: Number = Number{ value: 22 }
    let result = sum(a, b)
    return result.value
}
