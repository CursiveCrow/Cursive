// RUN: run-pass
// EXIT: 0
// SPEC: 6.8, 12.9
// DESC: Drop method execution verification

record Resource {
    var value: i32
}

procedure drop(~!) -> () {
}

procedure use_resource() -> i32 {
    region {
        let r: Resource = Resource { value: 42 }
        return r.value
    }
}

procedure scoped_drop() -> i32 {
    var result: i32 = 0
    {
        let r: Resource = Resource { value: 10 }
        result = r.value
    }
    return result
}

public procedure main(move ctx: Context) -> i32 {
    let v1: i32 = use_resource()
    let v2: i32 = scoped_drop()
    return 0
}
