// RUN: run-pass
// EXIT: 42
// SPEC: 5.2.4, 10.3
// DESC: Partial field move from unique binding

record Pair {
    a: i32
    b: i32
}

record Container {
    x: i32
    y: i32
    z: i32
}

procedure extract_field(move p: unique Pair) -> i32 {
    let a: i32 = move p.a
    return a
}

procedure extract_multiple(move c: unique Container) -> i32 {
    let x: i32 = move c.x
    let y: i32 = move c.y
    return x + y
}

public procedure main(move ctx: Context) -> i32 {
    let p: unique Pair = Pair { a: 42, b: 100 }
    let result: i32 = extract_field(move p)

    let c: unique Container = Container { x: 10, y: 20, z: 30 }
    let sum: i32 = extract_multiple(move c)

    return result
}
