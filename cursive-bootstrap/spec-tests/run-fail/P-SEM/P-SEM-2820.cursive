// RUN: run-fail
// EXIT: 1
// DIAG: P-SEM-2820
// SPEC: 14.7
// DESC: Runtime panic on type invariant violation at construction
// SKIP: Requires [[dynamic]] invariant checking

record PositiveInt {
    value: i32

    [[dynamic]]
    invariant { self.value > 0 }
}

public procedure main(move ctx: Context) -> i32 {
    // Construct with invariant-violating value
    let x: PositiveInt = PositiveInt{ value: -5 }
    return 0
}
